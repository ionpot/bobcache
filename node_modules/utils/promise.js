const cond = require("./cond.js");
const Func = require("./func.js");

const resolve = (x) => Promise.resolve(x);
const reject = (x) => Promise.reject(x);

exports.resolve = resolve;
exports.reject = reject;

exports.cond = (f) =>
	cond(f)(resolve, reject);

exports.make = (f) =>
	new Promise(f);

exports.delay = (f, ms, ...args) =>
	exports.make((done, fail) =>
		setTimeout(() => f(...args).then(done, fail), ms));

exports.resolveWith = (f) => (x) =>
	resolve(f(x));

exports.deferReject = (x) => () =>
	reject(x);

exports.stall = () =>
	exports.make(Func.empty);
